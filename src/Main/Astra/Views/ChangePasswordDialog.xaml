<Window x:Class="Astra.Views.ChangePasswordDialog"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:hc="https://handyorg.github.io/handycontrol"
        xmlns:helpers="clr-namespace:Astra.UI.Helpers;assembly=Astra.UI"
        Title="ä¿®æ”¹å¯†ç "
        Width="450"
        WindowStartupLocation="CenterOwner"
        WindowStyle="None"
        ResizeMode="NoResize"
        Background="Transparent"
        AllowsTransparency="True"
        SizeToContent="Height"
        ShowInTaskbar="False">

    <Border x:Name="RootBorder"
            Background="{DynamicResource SurfaceBrush}"
            CornerRadius="16"
            BorderBrush="{DynamicResource PrimaryBrush}"
            BorderThickness="1.5"
            helpers:BorderClipHelper.ClipToBounds="True"
            MouseLeftButtonDown="RootBorder_MouseLeftButtonDown">
        <Border.Effect>
            <DropShadowEffect Color="{DynamicResource ShadowColor}"
                              Opacity="0.2"
                              BlurRadius="32"
                              ShadowDepth="6" />
        </Border.Effect>

        <Grid Margin="32,24">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
            </Grid.RowDefinitions>


            <!-- æ ‡é¢˜ -->
            <StackPanel Grid.Row="0"
                        Margin="0,0,0,24">
                <TextBlock Text="ðŸ”‘ ä¿®æ”¹å¯†ç "
                           FontSize="22"
                           FontWeight="Bold"
                           Foreground="{DynamicResource PrimaryTextBrush}" />
                <TextBlock Text="{Binding Username, RelativeSource={RelativeSource AncestorType=Window}, StringFormat='ç”¨æˆ·: {0}'}"
                           FontSize="13"
                           Foreground="{DynamicResource SecondaryTextBrush}"
                           Margin="0,6,0,0" />
            </StackPanel>

            <!-- å…³é—­æŒ‰é’® - ä½äºŽçª—ä½“å³ä¸Šè§’ -->
            <Button x:Name="CloseButton"
                    Grid.Row="0"
                    Grid.RowSpan="2"                            
                    Margin="0,-8,-8,0"
                    Style="{StaticResource CloseButtonStyle}"
                    Click="CloseButton_Click" />

            <!-- å½“å‰å¯†ç  -->
            <StackPanel Grid.Row="1"
                        Margin="0,0,0,16">
                <TextBlock Text="å½“å‰å¯†ç  *"
                           FontSize="13"
                           FontWeight="Medium"
                           Foreground="{DynamicResource PrimaryTextBrush}"
                           Margin="0,0,0,8" />
                <hc:PasswordBox x:Name="OldPasswordInput"
                             Height="44"
                             Padding="14,0"
                             FontSize="14"
                             Style="{StaticResource ModernPasswordBoxStyle}"
                             Background="{DynamicResource SurfaceBrush}"
                             Foreground="{DynamicResource PrimaryTextBrush}"
                             BorderBrush="{DynamicResource BorderBrush}"
                             BorderThickness="1.5">

                </hc:PasswordBox>
            </StackPanel>

            <!-- æ–°å¯†ç  -->
            <StackPanel Grid.Row="2"
                        Margin="0,0,0,16">
                <TextBlock Text="æ–°å¯†ç  *"
                           FontSize="13"
                           FontWeight="Medium"
                           Foreground="{DynamicResource PrimaryTextBrush}"
                           Margin="0,0,0,8" />
                <hc:PasswordBox x:Name="NewPasswordInput"
                             Height="44"
                             Padding="14,0"
                             FontSize="14"
                             Style="{StaticResource ModernPasswordBoxStyle}"
                             Background="{DynamicResource SurfaceBrush}"
                             Foreground="{DynamicResource PrimaryTextBrush}"
                             BorderBrush="{DynamicResource BorderBrush}"
                             BorderThickness="1.5">

                </hc:PasswordBox>
                <!-- å¯†ç å¼ºåº¦æç¤º -->
                <TextBlock Text="å¯†ç é•¿åº¦è‡³å°‘6ä½"
                           FontSize="11"
                           Foreground="{DynamicResource SecondaryTextBrush}"
                           Margin="2,4,0,0" />
            </StackPanel>

            <!-- ç¡®è®¤æ–°å¯†ç  -->
            <StackPanel Grid.Row="3"
                        Margin="0,0,0,24">
                <TextBlock Text="ç¡®è®¤æ–°å¯†ç  *"
                           FontSize="13"
                           FontWeight="Medium"
                           Foreground="{DynamicResource PrimaryTextBrush}"
                           Margin="0,0,0,8" />
                <hc:PasswordBox x:Name="ConfirmPasswordInput"
                             Height="44"
                             Padding="14,0"
                             FontSize="14"
                             Style="{StaticResource ModernPasswordBoxStyle}"
                             Background="{DynamicResource SurfaceBrush}"
                             Foreground="{DynamicResource PrimaryTextBrush}"
                             BorderBrush="{DynamicResource BorderBrush}"
                             BorderThickness="1.5">

                </hc:PasswordBox>
            </StackPanel>

            <!-- æŒ‰é’® -->
            <StackPanel Grid.Row="4"
                        Orientation="Horizontal"
                        HorizontalAlignment="Right">
                <Button Content="å–æ¶ˆ"
                        Width="120"
                        Height="44"
                        Margin="0,0,12,0"
                        Click="CancelButton_Click"
                        Background="{DynamicResource ThirdlyRegionBrush}"
                        Foreground="{DynamicResource PrimaryTextBrush}"
                        FontSize="14"
                        FontWeight="Medium"
                        BorderThickness="0"
                        Cursor="Hand">
                    <Button.Style>
                        <Style TargetType="Button">
                            <Setter Property="Template">
                                <Setter.Value>
                                    <ControlTemplate TargetType="Button">
                                        <Border x:Name="border"
                                                Background="{TemplateBinding Background}"
                                                CornerRadius="10"
                                                Padding="20,10">
                                            <ContentPresenter HorizontalAlignment="Center"
                                                              VerticalAlignment="Center" />
                                        </Border>
                                        <ControlTemplate.Triggers>
                                            <Trigger Property="IsMouseOver"
                                                     Value="True">
                                                <Setter TargetName="border"
                                                        Property="Background"
                                                        Value="{DynamicResource SecondaryRegionBrush}" />
                                            </Trigger>
                                        </ControlTemplate.Triggers>
                                    </ControlTemplate>
                                </Setter.Value>
                            </Setter>
                        </Style>
                    </Button.Style>
                </Button>

                <Button Content="ç¡®å®šä¿®æ”¹"
                        Width="120"
                        Height="44"
                        Click="ConfirmButton_Click"
                        Background="{DynamicResource PrimaryBrush}"
                        Foreground="{DynamicResource ReverseTextBrush}"
                        FontSize="14"
                        FontWeight="Medium"
                        BorderThickness="0"
                        Cursor="Hand">
                    <Button.Style>
                        <Style TargetType="Button">
                            <Setter Property="Template">
                                <Setter.Value>
                                    <ControlTemplate TargetType="Button">
                                        <Border x:Name="border"
                                                Background="{TemplateBinding Background}"
                                                CornerRadius="10"
                                                Padding="20,10">
                                            <ContentPresenter HorizontalAlignment="Center"
                                                              VerticalAlignment="Center" />
                                        </Border>
                                        <ControlTemplate.Triggers>
                                            <Trigger Property="IsMouseOver"
                                                     Value="True">
                                                <Setter TargetName="border"
                                                        Property="Background"
                                                        Value="{DynamicResource DarkPrimaryBrush}" />
                                            </Trigger>
                                        </ControlTemplate.Triggers>
                                    </ControlTemplate>
                                </Setter.Value>
                            </Setter>
                        </Style>
                    </Button.Style>
                </Button>
            </StackPanel>
        </Grid>
    </Border>
</Window>

